YUI.add("moodle-atto_mathslate-snippeteditor",function(e,t){M.atto_mathslate=M.atto_mathslate||{},M.atto_mathslate.mSlots=function(){var t=[];this.slots=t,this.createItem=function(n){function r(n){Array.isArray(n[2])&&n[2].forEach(function(i){if(Array.isArray(i))r(i);else if(i==="[]"){var s=e.guid();t.push([["mi",{id:s,"class":"blank"},"[drop]"]]),n[2][n[2].indexOf(i)]=["mrow",{},t[t.length-1]]}})}var i=e.Node.create("<span></span").generateID(),s;return s=e.JSON.parse(n),s[1].id=i,r(s),s},this.getItemByID=function(t){var n;return this.slots.forEach(function(r){r.forEach(function(r){r[1].id===t&&(n=e.JSON.stringify(r))})}),n},this.isItem=function(e){var t=!1;return this.slots.forEach(function(n){if(t)return;n.forEach(function(n){n[1].id===e&&(t=!0)})}),t},this.removeSnippet=function(e){var t=0;return this.slots.forEach(function(n){n.forEach(function(r){r[1].id===e&&(t=r,n.splice(n.indexOf(r),1))})}),t},this.insertSnippet=function(e,t){var n=0;this.slots.forEach(function(r){r.forEach(function(i){if(n!==0)return;i[1].id===e&&(n=i,r.splice(r.indexOf(n),0,t))})});return},this.forEach=function(e){this.slots.forEach(function(t){t.forEach(function(n){e(n,t)})})},this.rekey=function(){var t=this;this.slots.forEach(function(n){n.length===0?n.push(["mi",{id:e.guid(),"class":"blank"},"[drop]"]):n.forEach(function(r){if(!r[1])return;r[1]["class"]&&r[1]["class"]==="blank"&&n.length>1&&t.removeSnippet(r[1].id),r[1].id&&(r[1].id=e.guid())})})},this.output=function(e){function n(t){var r="";if(typeof t=="string")return t;if(t[1]&&t[1][e]){var i=0;while(t[1][e][i])r+=t[1][e][i++],t[2]&&typeof t[1][e][i]=="number"&&(r+=n(t[2][t[1][e][i]])),i++}else t[2]&&(typeof t[2]=="string"?r+=t[2]:t[2].forEach(function(e){r+=n(e)}));return r}var r="";return t[0].forEach(function(e){r+=n(e)}),r}}},"@VERSION@",{requires:["json"]});
